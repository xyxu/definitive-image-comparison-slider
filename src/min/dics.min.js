"use strict"; let defaultOptions = { container: null, filters: null, hideTexts: null, textPosition: "top", linesOrientation: "horizontal", rotate: 0, arrayBackgroundColorText: null, arrayColorText: null, linesColor: null, onLoaded: function () { } }, Dics = function (t) { this.options = utils.extend({}, [defaultOptions, t], { clearEmpty: !0 }), this.container = this.options.container, null == this.container ? console.error("Container element not found!") : (this._setOrientation(this.options.linesOrientation, this.container), this.images = this._getImages(), this.sliders = [], this._activeSlider = null, this._load(this.images[0])) }; Dics.prototype._load = function (t, i = 1e5) { t.naturalWidth ? (this._buidAfterFirstImageLoad(t), this.options.onLoaded.call(), window.addEventListener("resize", (() => { this._setContainerWidth(t), this._resetSizes(), this.options.onLoaded.call() }))) : i > 0 ? (i--, setTimeout((() => { this._load(t, i) }), 100)) : console.error("error loading images") }, Dics.prototype._buidAfterFirstImageLoad = function (t) { this._setContainerWidth(t), this._build(), this._setEvents() }, Dics.prototype._setContainerWidth = function (t) { this.options.container.style.height = `${this._calcContainerHeight(t)}px` }, Dics.prototype._setOpacityContainerForLoading = function (t) { this.options.container.style.opacity = t }, Dics.prototype._resetSizes = function () { let t = this, i = t.images.length, e = t.container.getBoundingClientRect()[t.config.sizeField] / i; const o = t.container.querySelectorAll("[data-function='b-dics__section']"); for (let t = 0; t < o.length; t++) { let i = o[t]; i.style.flex = `0 0 ${e}px`, i.querySelector(".b-dics__image").style[this.config.positionField] = t * -e + "px"; const s = i.querySelector(".b-dics__slider"); s && (s.style[this.config.positionField] = e * (t + 1) + "px") } }, Dics.prototype._build = function () { let t = this; t._applyGlobalClass(t.options); let i = t.images.length, e = t.container.getBoundingClientRect()[t.config.sizeField] / i; for (let o = 0; o < i; o++) { let s = t.images[o], n = t._createElement("div", "b-dics__section"), l = t._createElement("div", "b-dics__image-container"), c = t._createSlider(o, e); t._createAltText(s, o, l), t._applyFilter(s, o, t.options.filters), t._rotate(s, l), n.setAttribute("data-function", "b-dics__section"), n.style.flex = `0 0 ${e}px`, s.classList.add("b-dics__image"), n.appendChild(l), l.appendChild(s), o < i - 1 && n.appendChild(c), t.container.appendChild(n), s.style[this.config.positionField] = o * -e + "px" } this.sections = this._getSections(), this._setOpacityContainerForLoading(1) }, Dics.prototype._getImages = function () { return this.container.querySelectorAll("img") }, Dics.prototype._getSections = function () { return this.container.querySelectorAll('[data-function="b-dics__section"]') }, Dics.prototype._createElement = function (t, i) { let e = document.createElement(t); return e.classList.add(i), e }, Dics.prototype._setEvents = function () { let t = this; t._disableImageDrag(), t._isGoingRight = null; let i = 0, e = function (e) { let o = e.pageX ? e.pageX : e.touches[0].pageX; o < i ? t._isGoingRight = !1 : o > i && (t._isGoingRight = !0), i = o; let s = t._calcPosition(e), n = s - t._beforeSectionsWidth(t.sections, t.images, t._activeSlider); t.sliders[t._activeSlider].style[t.config.positionField] = `${s}px`, t._pushSections(n, s) }; t.container.addEventListener("click", e); for (let i = 0; i < t.sliders.length; i++) { let o = t.sliders[i]; utils.setMultiEvents(o, ["mousedown", "touchstart"], (function (s) { t._activeSlider = i, t._clickPosition = t._calcPosition(s), o.classList.add("b-dics__slider--active"), utils.setMultiEvents(t.container, ["mousemove", "touchmove"], e) })) } utils.setMultiEvents(document.body, ["mouseup", "touchend"], (function () { let i = t.container.querySelectorAll(".b-dics__slider--active"); for (let o of i) o.classList.remove("b-dics__slider--active"), utils.removeMultiEvents(t.container, ["mousemove", "touchmove"], e) })) }, Dics.prototype._beforeSectionsWidth = function (t, i, e) { let o = 0; for (let i = 0; i < t.length; i++) { let s = t[i]; if (i === e) return o; o += s.getBoundingClientRect()[this.config.sizeField] } }, Dics.prototype._calcContainerHeight = function (t) { let i = t.naturalHeight, e = t.naturalWidth; return this.options.container.getBoundingClientRect().width / e * i }, Dics.prototype._setLeftToImages = function (t, i) { let e = 0; for (let o = 0; o < i.length; o++) { i[o].style[this.config.positionField] = `-${e}px`, e += t[o].getBoundingClientRect()[this.config.sizeField], this.sliders[o].style[this.config.positionField] = `${e}px` } }, Dics.prototype._disableImageDrag = function () { for (let t = 0; t < this.images.length; t++)this.sliders[t].addEventListener("dragstart", (function (t) { t.preventDefault() })), this.images[t].addEventListener("dragstart", (function (t) { t.preventDefault() })) }, Dics.prototype._applyFilter = function (t, i, e) { e && (t.style.filter = e[i]) }, Dics.prototype._applyGlobalClass = function (t) { let i = t.container; t.hideTexts && i.classList.add("b-dics--hide-texts"), "vertical" === t.linesOrientation && i.classList.add("b-dics--vertical"), "center" === t.textPosition ? i.classList.add("b-dics--tp-center") : "bottom" === t.textPosition ? i.classList.add("b-dics--tp-bottom") : "left" === t.textPosition ? i.classList.add("b-dics--tp-left") : "right" === t.textPosition && i.classList.add("b-dics--tp-right") }, Dics.prototype._createSlider = function (t, i) { let e = this._createElement("div", "b-dics__slider"); return this.options.linesColor && (e.style.color = this.options.linesColor), e.style[this.config.positionField] = i * (t + 1) + "px", this.sliders.push(e), e }, Dics.prototype._createAltText = function (t, i, e) { let o = t.getAttribute("alt"); if (o) { let t = this._createElement("p", "b-dics__text"); this.options.arrayBackgroundColorText && (t.style.backgroundColor = this.options.arrayBackgroundColorText[i]), this.options.arrayColorText && (t.style.color = this.options.arrayColorText[i]), t.appendChild(document.createTextNode(o)), e.appendChild(t) } }, Dics.prototype._rotate = function (t, i) { t.style.rotate = `-${this.options.rotate}`, i.style.rotate = this.options.rotate }, Dics.prototype._removeActiveElements = function () { let t = Dics.container.querySelectorAll(".b-dics__slider--active"); for (let i of t) i.classList.remove("b-dics__slider--active"), utils.removeMultiEvents(Dics.container, ["mousemove", "touchmove"], Dics.prototype._removeActiveElements) }, Dics.prototype._setOrientation = function (t) { this.config = {}, "vertical" === t ? (this.config.offsetSizeField = "offsetHeight", this.config.offsetPositionField = "offsetTop", this.config.sizeField = "height", this.config.positionField = "top", this.config.clientField = "clientY", this.config.pageField = "pageY") : (this.config.offsetSizeField = "offsetWidth", this.config.offsetPositionField = "offsetLeft", this.config.sizeField = "width", this.config.positionField = "left", this.config.clientField = "clientX", this.config.pageField = "pageX") }, Dics.prototype._calcPosition = function (t) { let i = this.container.getBoundingClientRect(), e = isNaN(t[this.config.clientField]) ? t.touches[0][this.config.clientField] : t[this.config.clientField]; return i[this.config.positionField] < e ? e - i[this.config.positionField] : 0 }, Dics.prototype._pushSections = function (t, i) { this._setFlex(i, this._isGoingRight); let e = this.sections[this._activeSlider], o = this.sections[this._activeSlider + 1], s = o.getBoundingClientRect()[this.config.sizeField] - (t - this.sections[this._activeSlider].getBoundingClientRect()[this.config.sizeField]); e.style.flex = !0 === this._isGoingRight ? `2 0 ${t}px` : `1 1 ${t}px`, o.style.flex = !0 === this._isGoingRight ? ` ${s}px` : `2 0 ${s}px`, this._setLeftToImages(this.sections, this.images) }, Dics.prototype._setFlex = function (t, i) { let e = 0; for (let o = 0; o < this.sections.length; o++) { let s = this.sections[o]; const n = s.getBoundingClientRect()[this.config.sizeField]; e += n, i && t > e - n && o > this._activeSlider || !i && t < e && o < this._activeSlider ? s.style.flex = `1 100 ${n}px` : s.style.flex = `0 0 ${n}px` } }; let utils = { extend: function (t, i, e) { for (let e in i) i.hasOwnProperty(e) && o(t, i[e]); function o(t, i) { for (let s in i) if (i.hasOwnProperty(s)) { let n = i[s]; if ("Object" === utils.getConstructor(n)) t[s] || (t[s] = {}), o(t[s], n); else { if (e.clearEmpty && null == n) continue; t[s] = n } } } return t }, setMultiEvents: function (t, i, e) { for (let o = 0; o < i.length; o++)t.addEventListener(i[o], e) }, removeMultiEvents: function (t, i, e) { for (let o = 0; o < i.length; o++)t.removeEventListener(i[o], e, !1) }, getConstructor: function (t) { return Object.prototype.toString.call(t).slice(8, -1) } };